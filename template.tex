\documentclass[landscape,a4page]{article}
\pagestyle{empty}

\usepackage[margin=1.0cm,left=0.6cm,right=0.6cm]{geometry}
\usepackage{fontspec}
\setmainfont{TeX Gyre Heros}
\usepackage{lipsum}
\usepackage{luacode,multicol}
\begin{document}
% nastavení oddělení sloupců
\columnseprule=0.3pt
\columnsep=20pt
\parindent=0pt
\parskip=4pt
\begin{multicols*}{3}

\begin{luacode*}
require("lualibs.lua")

local s =  utilities.json.tolua([[
@@@
]])



local function escape_print(text)
  -- this prevents
  tex.sprint(-2, text)
end

local function print_header(header, value)
  tex.print("\\textbf{" .. header .. ":} ")
  escape_print(value)
  tex.print("\\par")
end

for _, order in ipairs(s) do
  print_header("Objednávka číslo", order.order_number)
  print_header("Status objednávky", order.order_status)
  print_header("Uživatel", order.billing_first_name .. " " .. order.billing_last_name)
  print_header("E-mail", order.billing_email)
  print_header("Telefon", order.billing_phone)
  print_header("Poznámka", order.customer_note)
  tex.print([[
  \bigskip
  \begin{tabular}{p{.2\linewidth}p{.5\linewidth}}]])
  table.sort(order.products, function(a,b)
    local siga = a.sku or ""
    local sigb = b.sku or ""
    -- signatura může být 2H222, nebo F12222
    local pattern = "(2?%a+)(.+)"
    local starta, resta = siga:match(pattern)
    local startb, restb = sigb:match(pattern)
    if starta==startb then
      -- porovnávat čísla jen když je stejný začátek
      return resta < restb 
    end
    return starta < startb
  end)
  for _,v in ipairs(order.products) do
    escape_print(v.sku)
    tex.print("&")
    escape_print(v.name)
    tex.print("\\\\")
  end
  tex.print([[
  \end{tabular}

  \vfill
  \null
   
  ]])
  tex.print("\\par")
  tex.print("\\columnbreak")

end



\end{luacode*}
\end{multicols*}

\end{document}

